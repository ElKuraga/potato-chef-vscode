const vscode = require('vscode');

// –ù–∞—à–∏ —Ä–µ—Ü–µ–ø—Ç—ã
const recipes = [
    {
        name: "üçü –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏",
        ingredients: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å - 4 –∫—Ä—É–ø–Ω—ã–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª–∏–Ω—ã",
            "–ú–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ - –¥–ª—è —Ñ—Ä–∏—Ç—é—Ä–∞", 
            "–°–æ–ª—å - –ø–æ –≤–∫—É—Å—É"
        ],
        steps: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –æ—á–∏—Å—Ç–∏—Ç—å –∏ –Ω–∞—Ä–µ–∑–∞—Ç—å –±—Ä—É—Å–æ—á–∫–∞–º–∏",
            "–û–±–∂–∞—Ä–∏—Ç—å –≤ –º–∞—Å–ª–µ –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–∏",
            "–ü–æ—Å–æ–ª–∏—Ç—å –∏ –ø–æ–¥–∞–≤–∞—Ç—å"
        ]
    },
    {
        name: "ü•î –ü—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ",
        ingredients: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å - 6 —Å—Ä–µ–¥–Ω–∏—Ö –∫–∞—Ä—Ç–æ—Ñ–µ–ª–∏–Ω",
            "–ú–æ–ª–æ–∫–æ - 1 —Å—Ç–∞–∫–∞–Ω",
            "–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ - 50 –≥",
            "–°–æ–ª—å - –ø–æ –≤–∫—É—Å—É"
        ],
        steps: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –æ—Ç–≤–∞—Ä–∏—Ç—å –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏",
            "–°–ª–∏—Ç—å –≤–æ–¥—É –∏ —Ä–∞–∑–º—è—Ç—å",
            "–î–æ–±–∞–≤–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ –º–∞—Å–ª–æ",
            "–í–∑–±–∏—Ç—å –¥–æ –ø—ã—à–Ω–æ—Å—Ç–∏"
        ]
    },
    {
        name: "ü•û –î—Ä–∞–Ω–∏–∫–∏",
        ingredients: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å - 500 –≥",
            "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π - 1 —à—Ç",
            "–Ø–π—Ü–æ - 1 —à—Ç",
            "–ú—É–∫–∞ - 2 —Å—Ç.–ª.",
            "–°–æ–ª—å - –ø–æ –≤–∫—É—Å—É",
            "–ú–∞—Å–ª–æ –¥–ª—è –∂–∞—Ä–∫–∏"
        ],
        steps: [
            "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –∏ –ª—É–∫ –Ω–∞—Ç–µ—Ä–µ—Ç—å –Ω–∞ —Ç–µ—Ä–∫–µ",
            "–î–æ–±–∞–≤–∏—Ç—å —è–π—Ü–æ, –º—É–∫—É –∏ —Å–æ–ª—å",
            "–¢—â–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–º–µ—à–∞—Ç—å",
            "–û–±–∂–∞—Ä–∏—Ç—å –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ —Å –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–π –∫–æ—Ä–æ—á–∫–∏"
        ]
    }
];

function activate(context) {
    console.log('–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π –ø–ª–∞–≥–∏–Ω –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! ü•î');

    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—É
    let disposable = vscode.commands.registerCommand('potato-chef.showRecipes', function () {
        // –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞
        const items = recipes.map(recipe => ({
            label: recipe.name,
            description: `–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤: ${recipe.ingredients.length}`,
            detail: `–®–∞–≥–æ–≤ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: ${recipe.steps.length}`,
            recipe: recipe
        }));

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞
        vscode.window.showQuickPick(items, {
            placeHolder: '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–≥–æ –±–ª—é–¥–∞'
        }).then(selected => {
            if (selected) {
                const recipe = selected.recipe;
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ—Ü–µ–ø—Ç–æ–º
                const ingredientsText = recipe.ingredients.join('\n‚Ä¢ ');
                const stepsText = recipe.steps.join('\n‚Ä¢ ');
                
                const fullRecipe = `
${recipe.name}

ü•ï –ò–ù–ì–†–ï–î–ò–ï–ù–¢–´:
‚Ä¢ ${ingredientsText}

üë®‚Äçüç≥ –ü–†–ò–ì–û–¢–û–í–õ–ï–ù–ò–ï:
‚Ä¢ ${stepsText}

–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞! üç¥
                `;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ—Ü–µ–ø—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ
                vscode.window.showInformationMessage(fullRecipe);
            }
        });
    });

    context.subscriptions.push(disposable);
}

function deactivate() {}

module.exports = {
    activate,
    deactivate
};